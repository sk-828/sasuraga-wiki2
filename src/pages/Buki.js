import { useEffect, useState, useMemo } from "react";
import React from 'react'
import { Breadcrumb, Loading } from "../components";
import { fetchSeet } from "../api";


const iryokTable = [[0, 0, 0, 1, 2, 2, 3, 3, 4, 4],
[0, 0, 0, 1, 2, 3, 3, 3, 4, 4],
[0, 0, 0, 1, 2, 3, 4, 4, 4, 4],
[0, 0, 1, 1, 2, 3, 4, 4, 4, 5],
[0, 0, 1, 2, 2, 3, 4, 4, 5, 5],
[0, 1, 1, 2, 2, 3, 4, 5, 5, 5],
[0, 1, 1, 2, 3, 3, 4, 5, 5, 5],
[0, 1, 1, 2, 3, 4, 4, 5, 5, 6],
[0, 1, 2, 2, 3, 4, 4, 5, 6, 6],
[0, 1, 2, 3, 3, 4, 4, 5, 6, 7],
[1, 1, 2, 3, 3, 4, 5, 5, 6, 7],
[1, 2, 2, 3, 3, 4, 5, 6, 6, 7],
[1, 2, 2, 3, 4, 4, 5, 6, 6, 7],
[1, 2, 3, 3, 4, 4, 5, 6, 7, 7],
[1, 2, 3, 4, 4, 4, 5, 6, 7, 8],
[1, 2, 3, 4, 4, 5, 5, 6, 7, 8],
[1, 2, 3, 4, 4, 5, 6, 7, 7, 8],
[1, 2, 3, 4, 5, 5, 6, 7, 7, 8],
[1, 2, 3, 4, 5, 6, 6, 7, 7, 8],
[1, 2, 3, 4, 5, 6, 7, 7, 8, 9],
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
[1, 2, 3, 4, 6, 6, 7, 8, 9, 10],
[1, 2, 3, 5, 6, 6, 7, 8, 9, 10],
[2, 2, 3, 5, 6, 7, 7, 8, 9, 10],
[2, 3, 4, 5, 6, 7, 7, 8, 9, 10],
[2, 3, 4, 5, 6, 7, 8, 8, 9, 10],
[2, 3, 4, 5, 6, 8, 8, 9, 9, 10],
[2, 3, 4, 6, 6, 8, 8, 9, 9, 10],
[2, 3, 4, 6, 6, 8, 9, 9, 10, 10],
[2, 3, 4, 6, 7, 8, 9, 9, 10, 10],
[2, 4, 4, 6, 7, 8, 9, 10, 10, 10],
[2, 4, 5, 6, 7, 8, 9, 10, 10, 11],
[3, 4, 5, 6, 7, 8, 10, 10, 10, 11],
[3, 4, 5, 6, 8, 8, 10, 10, 10, 11],
[3, 4, 5, 6, 8, 9, 10, 10, 11, 11],
[3, 4, 5, 7, 8, 9, 10, 10, 11, 12],
[3, 5, 5, 7, 8, 9, 10, 11, 11, 12],
[3, 5, 6, 7, 8, 9, 10, 11, 12, 12],
[3, 5, 6, 7, 8, 10, 10, 11, 12, 13],
[4, 5, 6, 7, 8, 10, 11, 11, 12, 13],
[4, 5, 6, 7, 9, 10, 11, 11, 12, 13],
[4, 6, 6, 7, 9, 10, 11, 12, 12, 13],
[4, 6, 7, 7, 9, 10, 11, 12, 13, 13],
[4, 6, 7, 8, 9, 10, 11, 12, 13, 14],
[4, 6, 7, 8, 10, 10, 11, 12, 13, 14],
[4, 6, 7, 9, 10, 10, 11, 12, 13, 14],
[4, 6, 7, 9, 10, 10, 12, 13, 13, 14],
[4, 6, 7, 9, 10, 11, 12, 13, 13, 15],
[4, 6, 7, 9, 10, 12, 12, 13, 13, 15],
[4, 6, 7, 10, 10, 12, 12, 13, 14, 15],
[4, 6, 8, 10, 10, 12, 12, 13, 15, 15],
[5, 7, 8, 10, 10, 12, 12, 13, 15, 15],
[5, 7, 8, 10, 11, 12, 12, 13, 15, 15],
[5, 7, 9, 10, 11, 12, 12, 14, 15, 15],
[5, 7, 9, 10, 11, 12, 13, 14, 15, 16],
[5, 7, 10, 10, 11, 12, 13, 14, 16, 16],
[5, 8, 10, 10, 11, 12, 13, 15, 16, 16],
[5, 8, 10, 11, 11, 12, 13, 15, 16, 17],
[5, 8, 10, 11, 12, 12, 13, 15, 16, 17],
[5, 9, 10, 11, 12, 12, 14, 15, 16, 17],
[5, 9, 10, 11, 12, 13, 14, 15, 16, 18],
[5, 9, 10, 11, 12, 13, 14, 16, 17, 18],
[5, 9, 10, 11, 13, 13, 14, 16, 17, 18],
[5, 9, 10, 11, 13, 13, 15, 17, 17, 18],
[5, 9, 10, 11, 13, 14, 15, 17, 17, 18],
[5, 9, 10, 12, 13, 14, 15, 17, 18, 18],
[5, 9, 10, 12, 13, 15, 15, 17, 18, 19],
[5, 9, 10, 12, 13, 15, 16, 17, 19, 19],
[5, 9, 10, 12, 14, 15, 16, 17, 19, 19],
[5, 9, 10, 12, 14, 16, 16, 17, 19, 19],
[5, 9, 10, 12, 14, 16, 17, 18, 19, 19],
[5, 9, 10, 13, 14, 16, 17, 18, 19, 20],
[5, 9, 10, 13, 15, 16, 17, 18, 19, 20],
[5, 9, 10, 13, 15, 16, 17, 19, 20, 21],
[6, 9, 10, 13, 15, 16, 18, 19, 20, 21],
[6, 9, 10, 13, 16, 16, 18, 19, 20, 21],
[6, 9, 10, 13, 16, 17, 18, 19, 20, 21],
[6, 9, 10, 13, 16, 17, 18, 20, 21, 22],
[6, 9, 10, 13, 16, 17, 19, 20, 22, 23],
[6, 9, 10, 13, 16, 18, 19, 20, 22, 23],
[6, 9, 10, 13, 16, 18, 20, 21, 22, 23],
[6, 9, 10, 13, 17, 18, 20, 21, 22, 23],
[6, 9, 10, 14, 17, 18, 20, 21, 22, 24],
[6, 9, 11, 14, 17, 18, 20, 21, 23, 24],
[6, 9, 11, 14, 17, 19, 20, 21, 23, 24],
[6, 9, 11, 14, 17, 19, 21, 22, 23, 24],
[7, 10, 11, 14, 17, 19, 21, 22, 23, 25],
[7, 10, 12, 14, 17, 19, 21, 22, 24, 25],
[7, 10, 12, 14, 18, 19, 21, 22, 24, 25],
[7, 10, 12, 15, 18, 19, 21, 22, 24, 26],
[7, 10, 12, 15, 18, 19, 21, 23, 25, 26],
[7, 11, 13, 15, 18, 19, 21, 23, 25, 26],
[7, 11, 13, 15, 18, 20, 21, 23, 25, 27],
[8, 11, 13, 15, 18, 20, 22, 23, 25, 27],
[8, 11, 13, 16, 18, 20, 22, 23, 25, 28],
[8, 11, 14, 16, 18, 20, 22, 23, 26, 28],
[8, 11, 14, 16, 19, 20, 22, 24, 26, 28],
[8, 12, 14, 16, 19, 20, 22, 24, 26, 28],
[8, 12, 15, 16, 19, 20, 22, 24, 27, 28],
[8, 12, 15, 17, 19, 20, 22, 24, 27, 29],
[8, 12, 15, 18, 19, 20, 22, 24, 27, 30]]

function iryokuDamage(iryok, c) {
  var dice = 0;
  var damage = 0;
  dice += Math.floor(Math.random() * (6 + 1 - 1)) + 1;
  dice += Math.floor(Math.random() * (6 + 1 - 1)) + 1;
  if (dice == 2) {
    return 0;
  }
  if (dice >= c) {
    damage += iryokuDamage(iryok, c);
  }
  damage += iryokTable[iryok][dice - 2];
  return damage;
}

function damage(iryok, c, d) {
  var damage = Number(iryokuDamage(iryok, c)) + Number(d);
  return damage;
}

export function TestDamage() {
  const [txt, setText] = useState('');
  function handleSubmit(event) {
    event.preventDefault();
    let userText = document.getElementById('userText');
    console.log(userI.value, userC.value, userD.value);
    setText(damage(userI.value, userC.value, userD.value));
  }
  return (
    <form onSubmit={handleSubmit}>
      <div className="field has-addons">
        <input type={Number} id="userI" placeholder="威力" />
        <input type={Number} id="userC" placeholder="クリティカル値" />
        <input type={Number} id="userD" placeholder="追加dダメージ" />
        <div className="control">
          <button type="submit" className="button is-dark">
            Set
          </button>
        </div>
      </div>
      <p>{txt}</p>
    </form>
  );
}